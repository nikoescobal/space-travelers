{"ast":null,"code":"import { JOIN_MISSION, LOAD_MISSIONS, LEAVE_MISSION } from \"../../types\";\nexport const URL = \"https://api.spacexdata.com/v3/missions\";\nexport const joinMission = id => ({\n  type: JOIN_MISSION,\n  payload: id\n});\nexport const loadMissions = id => ({\n  type: LOAD_MISSIONS,\n  payload: id\n});\nexport const leaveMission = payload => ({\n  type: LEAVE_MISSION,\n  payload\n});\nexport const fetchAllMissions = async () => {\n  const response = await fetch(URL);\n  return response.json();\n};\nexport const missionsSelector = state => state.missions; // export const getMissions = () =>\n//   async function getMissions(dispatch) {\n//     const allMissions = await fetchAllMissions();\n//     const missions = allMissions.map((mission) => ({\n//       id: mission.mission_id,\n//       missionName: mission.mission_name,\n//       description: mission.description,\n//       wikipedia: mission.details,\n//     }));\n//     dispatch(loadMissions(missions));\n//   };\n\nexport const getMissions = () => async dispatch => {\n  const response = await fetch(URL);\n  const data = await response.json();\n  const missionArr = [];\n  data.forEach(m => {\n    const mission = {\n      mission_id: m.mission_id,\n      mission_name: m.mission_name,\n      mission_description: m.description\n    };\n    missionArr.push(mission);\n  });\n  dispatch(loadMissions(missionArr));\n};\nexport const newStateToJoinMission = (missions, id) => {\n  const newState = missions.map(mission => {\n    if (mission.mission_id !== id) {\n      return mission;\n    }\n\n    return { ...mission,\n      isReserved: true\n    };\n  });\n  return newState;\n};\nexport const newStateToLeaveMission = (missions, id) => {\n  const newState = missions.map(mission => {\n    if (mission.mission_id !== id) {\n      return mission;\n    }\n\n    return { ...mission,\n      isReserved: false\n    };\n  });\n  return newState;\n};\nexport default getMissions;","map":{"version":3,"sources":["/home/codepriest/Documents/microverse/space-travelers/src/store/reducers/actions/missionActions.js"],"names":["JOIN_MISSION","LOAD_MISSIONS","LEAVE_MISSION","URL","joinMission","id","type","payload","loadMissions","leaveMission","fetchAllMissions","response","fetch","json","missionsSelector","state","missions","getMissions","dispatch","data","missionArr","forEach","m","mission","mission_id","mission_name","mission_description","description","push","newStateToJoinMission","newState","map","isReserved","newStateToLeaveMission"],"mappings":"AAAA,SAASA,YAAT,EAAuBC,aAAvB,EAAsCC,aAAtC,QAA2D,aAA3D;AAEA,OAAO,MAAMC,GAAG,GAAG,wCAAZ;AACP,OAAO,MAAMC,WAAW,GAAIC,EAAD,KAAS;AAChCC,EAAAA,IAAI,EAAEN,YAD0B;AAEhCO,EAAAA,OAAO,EAAEF;AAFuB,CAAT,CAApB;AAKP,OAAO,MAAMG,YAAY,GAAIH,EAAD,KAAS;AACjCC,EAAAA,IAAI,EAAEL,aAD2B;AAEjCM,EAAAA,OAAO,EAAEF;AAFwB,CAAT,CAArB;AAKP,OAAO,MAAMI,YAAY,GAAIF,OAAD,KAAc;AACtCD,EAAAA,IAAI,EAAEJ,aADgC;AAEtCK,EAAAA;AAFsC,CAAd,CAArB;AAKP,OAAO,MAAMG,gBAAgB,GAAG,YAAW;AACvC,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACT,GAAD,CAA5B;AACA,SAAOQ,QAAQ,CAACE,IAAT,EAAP;AACH,CAHM;AAKP,OAAO,MAAMC,gBAAgB,GAAIC,KAAD,IAAWA,KAAK,CAACC,QAA1C,C,CAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAMC,WAAW,GAAG,MAAM,MAAMC,QAAN,IAAmB;AAChD,QAAMP,QAAQ,GAAG,MAAMC,KAAK,CAACT,GAAD,CAA5B;AACA,QAAMgB,IAAI,GAAG,MAAMR,QAAQ,CAACE,IAAT,EAAnB;AACA,QAAMO,UAAU,GAAG,EAAnB;AACAD,EAAAA,IAAI,CAACE,OAAL,CAAcC,CAAD,IAAO;AAChB,UAAMC,OAAO,GAAG;AACZC,MAAAA,UAAU,EAAEF,CAAC,CAACE,UADF;AAEZC,MAAAA,YAAY,EAAEH,CAAC,CAACG,YAFJ;AAGZC,MAAAA,mBAAmB,EAAEJ,CAAC,CAACK;AAHX,KAAhB;AAKAP,IAAAA,UAAU,CAACQ,IAAX,CAAgBL,OAAhB;AACH,GAPD;AAQAL,EAAAA,QAAQ,CAACV,YAAY,CAACY,UAAD,CAAb,CAAR;AACH,CAbM;AAcP,OAAO,MAAMS,qBAAqB,GAAG,CAACb,QAAD,EAAWX,EAAX,KAAkB;AACnD,QAAMyB,QAAQ,GAAGd,QAAQ,CAACe,GAAT,CAAcR,OAAD,IAAa;AACvC,QAAIA,OAAO,CAACC,UAAR,KAAuBnB,EAA3B,EAA+B;AAC3B,aAAOkB,OAAP;AACH;;AACD,WAAO,EAAC,GAAGA,OAAJ;AAAaS,MAAAA,UAAU,EAAE;AAAzB,KAAP;AACH,GALgB,CAAjB;AAMA,SAAOF,QAAP;AACH,CARM;AAUP,OAAO,MAAMG,sBAAsB,GAAG,CAACjB,QAAD,EAAWX,EAAX,KAAkB;AACpD,QAAMyB,QAAQ,GAAGd,QAAQ,CAACe,GAAT,CAAcR,OAAD,IAAa;AACvC,QAAIA,OAAO,CAACC,UAAR,KAAuBnB,EAA3B,EAA+B;AAC3B,aAAOkB,OAAP;AACH;;AACD,WAAO,EAAC,GAAGA,OAAJ;AAAaS,MAAAA,UAAU,EAAE;AAAzB,KAAP;AACH,GALgB,CAAjB;AAMA,SAAOF,QAAP;AACH,CARM;AAUP,eAAeb,WAAf","sourcesContent":["import { JOIN_MISSION, LOAD_MISSIONS, LEAVE_MISSION } from \"../../types\";\n\nexport const URL = \"https://api.spacexdata.com/v3/missions\";\nexport const joinMission = (id) => ({\n    type: JOIN_MISSION,\n    payload: id,\n});\n\nexport const loadMissions = (id) => ({\n    type: LOAD_MISSIONS,\n    payload: id,\n});\n\nexport const leaveMission = (payload) => ({\n    type: LEAVE_MISSION,\n    payload,\n});\n\nexport const fetchAllMissions = async() => {\n    const response = await fetch(URL);\n    return response.json();\n};\n\nexport const missionsSelector = (state) => state.missions;\n\n// export const getMissions = () =>\n//   async function getMissions(dispatch) {\n//     const allMissions = await fetchAllMissions();\n//     const missions = allMissions.map((mission) => ({\n//       id: mission.mission_id,\n//       missionName: mission.mission_name,\n//       description: mission.description,\n//       wikipedia: mission.details,\n//     }));\n//     dispatch(loadMissions(missions));\n//   };\n\nexport const getMissions = () => async(dispatch) => {\n    const response = await fetch(URL);\n    const data = await response.json();\n    const missionArr = [];\n    data.forEach((m) => {\n        const mission = {\n            mission_id: m.mission_id,\n            mission_name: m.mission_name,\n            mission_description: m.description,\n        };\n        missionArr.push(mission);\n    });\n    dispatch(loadMissions(missionArr));\n};\nexport const newStateToJoinMission = (missions, id) => {\n    const newState = missions.map((mission) => {\n        if (mission.mission_id !== id) {\n            return mission;\n        }\n        return {...mission, isReserved: true };\n    });\n    return newState;\n};\n\nexport const newStateToLeaveMission = (missions, id) => {\n    const newState = missions.map((mission) => {\n        if (mission.mission_id !== id) {\n            return mission;\n        }\n        return {...mission, isReserved: false };\n    });\n    return newState;\n};\n\nexport default getMissions;"]},"metadata":{},"sourceType":"module"}